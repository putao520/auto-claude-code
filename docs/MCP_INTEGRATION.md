# Auto Claude Code - MCP ä»»åŠ¡åˆ†å‘ç³»ç»Ÿè®¾è®¡

## é¡¹ç›®æ¦‚è¿°

å°† Auto Claude Code ä»ç®€å•çš„è·¯å¾„è½¬æ¢ä»£ç†å·¥å…·æ‰©å±•ä¸ºæ”¯æŒ MCP (Model Context Protocol) çš„æ™ºèƒ½ä»»åŠ¡åˆ†å‘ç³»ç»Ÿã€‚ä¸»ç¼–ç¨‹ AI å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„ MCP æœåŠ¡å™¨åˆ†å‘ä»»åŠ¡ç»™å¤šä¸ª Claude Code å®ä¾‹ï¼Œå®ç°å¼‚æ­¥æ‰§è¡Œå’Œç»“æœèšåˆã€‚

### æ ¸å¿ƒä»·å€¼å‡çº§
- **æ™ºèƒ½ä»»åŠ¡åˆ†å‘**ï¼šä¸» AI å¯ä»¥å°†å¤æ‚ä»»åŠ¡åˆ†è§£å¹¶åˆ†å‘ç»™å¤šä¸ª Claude Code å®ä¾‹
- **å¼‚æ­¥æ‰§è¡Œç®¡ç†**ï¼šæ”¯æŒå¹¶å‘æ‰§è¡Œå¤šä¸ªç¼–ç¨‹ä»»åŠ¡ï¼Œæé«˜æ•ˆç‡
- **ç»“æœèšåˆå±•ç¤º**ï¼šåœ¨ç»Ÿä¸€æ§åˆ¶å°æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€å’Œç»“æœ
- **å·¥ä½œç›®å½•éš”ç¦»**ï¼šåˆ©ç”¨ Git Worktrees å®ç°å®Œå…¨ç‹¬ç«‹çš„å·¥ä½œç¯å¢ƒ

## Claude Code ç‹¬ç‰¹èƒ½åŠ›åˆ†æ

åŸºäºæœ€æ–°ç ”ç©¶ï¼ŒClaude Code å…·æœ‰ä»¥ä¸‹ç‹¬ä¸€æ— äºŒçš„èƒ½åŠ›ï¼Œè¿™äº›æ˜¯ä¸» AI æ— æ³•æ›¿ä»£çš„ï¼š

### ğŸ¯ Claude Code çš„æ ¸å¿ƒä¼˜åŠ¿

#### 1. **Agentic ç¼–ç¨‹èƒ½åŠ›**
- **ç›´æ¥æ–‡ä»¶æ“ä½œ**ï¼šå¯ä»¥ç›´æ¥è¯»å–ã€ä¿®æ”¹ã€åˆ›å»ºæ–‡ä»¶ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”Ÿæˆä»£ç 
- **å‘½ä»¤è¡Œé›†æˆ**ï¼šåœ¨ WSL ç¯å¢ƒä¸­æ‰§è¡Œ shell å‘½ä»¤ã€è¿è¡Œæµ‹è¯•ã€ç®¡ç† Git æ“ä½œ
- **å¤šæ­¥éª¤å·¥ä½œæµ**ï¼šèƒ½å¤Ÿæ‰§è¡Œå¤æ‚çš„å¤šæ­¥éª¤ç¼–ç¨‹ä»»åŠ¡ï¼Œå¦‚é‡æ„â†’æµ‹è¯•â†’æäº¤çš„å®Œæ•´æµç¨‹

#### 2. **æ·±åº¦ä»£ç ç†è§£å’Œæ¨ç†**
- **å¤§å‹ä»£ç åº“åˆ†æ**ï¼š200K token ä¸Šä¸‹æ–‡çª—å£ï¼Œèƒ½ç†è§£æ•´ä¸ªé¡¹ç›®æ¶æ„
- **Legacy ä»£ç ä¸“å®¶**ï¼šæ“…é•¿åˆ†æå’Œé‡æ„é—ç•™ä»£ç ï¼Œæä¾›è¯¦ç»†çš„æ¶æ„è§£é‡Š
- **è·¨æ–‡ä»¶ä¾èµ–åˆ†æ**ï¼šç†è§£å¤æ‚çš„æ¨¡å—é—´ä¾èµ–å…³ç³»

#### 3. **é«˜è´¨é‡æ–‡æ¡£ç”Ÿæˆ**
- **è‡ªåŠ¨åŒ–æ–‡æ¡£**ï¼šä»ä»£ç è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šçº§æ–‡æ¡£
- **æ¶æ„è¯´æ˜**ï¼šä¸ºå¤æ‚ç³»ç»Ÿç”Ÿæˆæ¸…æ™°çš„æ¶æ„æ–‡æ¡£å’Œè®¾è®¡å†³ç­–è¯´æ˜
- **ä»£ç æ³¨é‡Š**ï¼šç”Ÿæˆé«˜è´¨é‡çš„å†…è”æ³¨é‡Šå’Œ API æ–‡æ¡£

#### 4. **ç²¾ç¡®çš„ä»£ç é‡æ„**
- **å¤§è§„æ¨¡é‡æ„**ï¼šèƒ½å¤Ÿå®‰å…¨åœ°è¿›è¡Œè·¨æ–‡ä»¶çš„å¤§è§„æ¨¡ä»£ç é‡æ„
- **æ€§èƒ½ä¼˜åŒ–**ï¼šè¯†åˆ«æ€§èƒ½ç“¶é¢ˆå¹¶æä¾›ä¼˜åŒ–å»ºè®®
- **ä»£ç è´¨é‡æå‡**ï¼šéµå¾ªæœ€ä½³å®è·µï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§

### ğŸš« ä¸» AI åº”è¯¥ä¿ç•™çš„ä»»åŠ¡ç±»å‹

ä¸ºé¿å…åŠŸèƒ½é‡å ï¼Œä»¥ä¸‹ä»»åŠ¡åº”ç”±ä¸» AI å¤„ç†ï¼š
- **éœ€æ±‚åˆ†æå’Œæ¶æ„è®¾è®¡**ï¼šé«˜å±‚æ¬¡çš„ç³»ç»Ÿè®¾è®¡å’ŒæŠ€æœ¯é€‰å‹
- **åˆ›æ„ç¼–ç¨‹å’ŒåŸå‹è®¾è®¡**ï¼šæ–°åŠŸèƒ½çš„æ¦‚å¿µéªŒè¯å’Œå¿«é€ŸåŸå‹
- **è·¨è¯­è¨€ç¿»è¯‘**ï¼šä¸åŒç¼–ç¨‹è¯­è¨€é—´çš„ä»£ç è½¬æ¢
- **ç®—æ³•è®¾è®¡**ï¼šå¤æ‚ç®—æ³•çš„è®¾è®¡å’Œæ•°å­¦å»ºæ¨¡
- **æŠ€æœ¯å’¨è¯¢**ï¼šæŠ€æœ¯æ ˆé€‰æ‹©ã€æœ€ä½³å®è·µå»ºè®®

## MCP æœåŠ¡å™¨ä»»åŠ¡ç±»å‹å®šä¹‰

### æ”¯æŒçš„ä»»åŠ¡ç±»å‹

æˆ‘ä»¬çš„ MCP æœåŠ¡å™¨å°†æ˜ç¡®æ”¯æŒä»¥ä¸‹ Claude Code ä¸“å±ä»»åŠ¡ï¼š

#### ğŸ“ **ä»£ç åº“ç»´æŠ¤ä»»åŠ¡**
```json
{
  "task_type": "codebase_maintenance",
  "subtypes": [
    "legacy_refactor",      // é—ç•™ä»£ç é‡æ„
    "dependency_update",    // ä¾èµ–æ›´æ–°å’Œå…¼å®¹æ€§ä¿®å¤
    "code_cleanup",         // ä»£ç æ¸…ç†å’Œä¼˜åŒ–
    "documentation_sync"    // æ–‡æ¡£ä¸ä»£ç åŒæ­¥
  ]
}
```

#### ğŸ”§ **è‡ªåŠ¨åŒ–å¼€å‘ä»»åŠ¡**
```json
{
  "task_type": "automated_development",
  "subtypes": [
    "test_generation",      // è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•
    "ci_cd_setup",         // CI/CD æµæ°´çº¿é…ç½®
    "build_optimization",   // æ„å»ºè¿‡ç¨‹ä¼˜åŒ–
    "git_workflow"         // Git å·¥ä½œæµè‡ªåŠ¨åŒ–
  ]
}
```

#### ğŸ“Š **ä»£ç åˆ†æä»»åŠ¡**
```json
{
  "task_type": "code_analysis",
  "subtypes": [
    "security_audit",       // å®‰å…¨æ¼æ´æ‰«æ
    "performance_analysis", // æ€§èƒ½ç“¶é¢ˆåˆ†æ
    "dependency_audit",     // ä¾èµ–å…³ç³»å®¡è®¡
    "code_metrics"         // ä»£ç è´¨é‡æŒ‡æ ‡åˆ†æ
  ]
}
```

#### ğŸ“ **æ–‡æ¡£ç”Ÿæˆä»»åŠ¡**
```json
{
  "task_type": "documentation",
  "subtypes": [
    "api_docs",            // API æ–‡æ¡£ç”Ÿæˆ
    "architecture_docs",   // æ¶æ„æ–‡æ¡£
    "user_guides",         // ç”¨æˆ·æŒ‡å—
    "changelog_generation" // å˜æ›´æ—¥å¿—ç”Ÿæˆ
  ]
}
```

#### ğŸ”„ **è¿ç§»å’Œå‡çº§ä»»åŠ¡**
```json
{
  "task_type": "migration",
  "subtypes": [
    "framework_migration",  // æ¡†æ¶è¿ç§»
    "database_migration",   // æ•°æ®åº“è¿ç§»
    "api_versioning",      // API ç‰ˆæœ¬å‡çº§
    "platform_porting"    // å¹³å°ç§»æ¤
  ]
}
```

## æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "ä¸»ç¼–ç¨‹ç¯å¢ƒ"
        A[ä¸»ç¼–ç¨‹ AI] --> B[Claude Code Client]
        B --> C[MCP Client]
    end
    
    subgraph "Auto Claude Code MCP æœåŠ¡å™¨"
        C --> D[MCP Server Interface]
        D --> E[ä»»åŠ¡åˆ†ç±»å™¨]
        E --> F[ä»»åŠ¡ç®¡ç†å™¨]
        F --> G[Git Worktree ç®¡ç†å™¨]
        F --> H[Claude Code å®ä¾‹ç®¡ç†å™¨]
        F --> I[ç»“æœèšåˆå™¨]
        I --> J[Web æ§åˆ¶å°]
    end
    
    subgraph "å·¥ä½œç¯å¢ƒéš”ç¦»"
        G --> K["Worktree 1<br/>legacy-refactor<br/>Branch: refactor/auth-system"]
        G --> L["Worktree 2<br/>test-generation<br/>Branch: feature/auto-tests"]
        G --> M["Worktree N<br/>docs-update<br/>Branch: docs/api-v2"]
    end
    
    subgraph "Claude Code å®ä¾‹æ± "
        H --> N["å®ä¾‹ 1: Legacy ä»£ç ä¸“å®¶<br/>ä¸“é—¨å¤„ç†é‡æ„ä»»åŠ¡<br/>å·¥ä½œç›®å½•: /mnt/c/worktrees/legacy_001"]
        H --> O["å®ä¾‹ 2: æµ‹è¯•ç”Ÿæˆä¸“å®¶<br/>ä¸“é—¨å¤„ç†æµ‹è¯•ä»»åŠ¡<br/>å·¥ä½œç›®å½•: /mnt/c/worktrees/test_002"]
        H --> P["å®ä¾‹ N: æ–‡æ¡£ç”Ÿæˆä¸“å®¶<br/>ä¸“é—¨å¤„ç†æ–‡æ¡£ä»»åŠ¡<br/>å·¥ä½œç›®å½•: /mnt/c/worktrees/docs_N"]
    end
    
    subgraph "ç›‘æ§å’Œç»“æœ"
        I --> Q[å®æ—¶çŠ¶æ€ç›‘æ§]
        I --> R[ä»»åŠ¡æ‰§è¡Œæ—¥å¿—]
        I --> S[ç»“æœè´¨é‡è¯„ä¼°]
    end
```

### æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 1. **ä»»åŠ¡åˆ†ç±»å™¨ (Task Classifier)**
```go
type TaskClassifier struct {
    supportedTypes map[string]TaskDefinition
}

type TaskDefinition struct {
    Type        string   `json:"type"`
    Subtypes    []string `json:"subtypes"`
    Description string   `json:"description"`
    Capabilities []string `json:"capabilities"`
    Restrictions []string `json:"restrictions"`
}

func (tc *TaskClassifier) ValidateTask(task *Task) error {
    // éªŒè¯ä»»åŠ¡æ˜¯å¦å±äº Claude Code çš„ä¸“é•¿é¢†åŸŸ
    // æ‹’ç»åº”è¯¥ç”±ä¸» AI å¤„ç†çš„ä»»åŠ¡ç±»å‹
}
```

#### 2. **æ™ºèƒ½å®ä¾‹åˆ†é…å™¨**
```go
type InstanceAllocator struct {
    instances map[string]*ClaudeCodeInstance
    expertise map[string][]string // å®ä¾‹ä¸“é•¿æ˜ å°„
}

func (ia *InstanceAllocator) AllocateInstance(taskType string) (*ClaudeCodeInstance, error) {
    // æ ¹æ®ä»»åŠ¡ç±»å‹åˆ†é…æœ€é€‚åˆçš„ Claude Code å®ä¾‹
    // è€ƒè™‘å®ä¾‹å½“å‰è´Ÿè½½å’Œä¸“é•¿åŒ¹é…åº¦
}
```

## MCP åè®®æ¥å£è®¾è®¡

### å·¥å…·å®šä¹‰

```json
{
  "tools": [
    {
      "name": "create_coding_task",
      "description": "åˆ›å»ºä¸€ä¸ªé€‚åˆ Claude Code å¤„ç†çš„ç¼–ç¨‹ä»»åŠ¡",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_type": {
            "type": "string",
            "enum": ["codebase_maintenance", "automated_development", "code_analysis", "documentation", "migration"],
            "description": "ä»»åŠ¡ç±»å‹"
          },
          "subtype": {
            "type": "string",
            "description": "å…·ä½“å­ä»»åŠ¡ç±»å‹"
          },
          "repository_path": {
            "type": "string",
            "description": "ç›®æ ‡ä»£ç åº“è·¯å¾„"
          },
          "branch_name": {
            "type": "string",
            "description": "å·¥ä½œåˆ†æ”¯åç§°"
          },
          "requirements": {
            "type": "string",
            "description": "è¯¦ç»†ä»»åŠ¡è¦æ±‚"
          },
          "priority": {
            "type": "string",
            "enum": ["low", "medium", "high", "urgent"],
            "default": "medium"
          }
        },
        "required": ["task_type", "subtype", "repository_path", "requirements"]
      }
    },
    {
      "name": "get_task_status",
      "description": "è·å–ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "ä»»åŠ¡ID"
          }
        },
        "required": ["task_id"]
      }
    },
    {
      "name": "list_active_tasks",
      "description": "åˆ—å‡ºæ‰€æœ‰æ´»è·ƒä»»åŠ¡",
      "inputSchema": {
        "type": "object",
        "properties": {
          "filter": {
            "type": "string",
            "enum": ["all", "running", "completed", "failed"],
            "default": "all"
          }
        }
      }
    },
    {
      "name": "get_supported_task_types",
      "description": "è·å–æ”¯æŒçš„ä»»åŠ¡ç±»å‹åˆ—è¡¨",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    }
  ]
}
```

### ä½¿ç”¨ç¤ºä¾‹

ä¸»ç¼–ç¨‹ AI å¯ä»¥è¿™æ ·ä½¿ç”¨æˆ‘ä»¬çš„ MCP æœåŠ¡å™¨ï¼š

```javascript
// 1. æŸ¥è¯¢æ”¯æŒçš„ä»»åŠ¡ç±»å‹
const supportedTypes = await mcp.call("get_supported_task_types", {});

// 2. åˆ›å»ºä»£ç é‡æ„ä»»åŠ¡
const refactorTask = await mcp.call("create_coding_task", {
  task_type: "codebase_maintenance",
  subtype: "legacy_refactor",
  repository_path: "/path/to/legacy/project",
  branch_name: "refactor/auth-module",
  requirements: "é‡æ„è®¤è¯æ¨¡å—ï¼Œæå–å…¬å…±æ¥å£ï¼Œæ·»åŠ å•å…ƒæµ‹è¯•ï¼Œæ›´æ–°æ–‡æ¡£",
  priority: "high"
});

// 3. åˆ›å»ºæ–‡æ¡£ç”Ÿæˆä»»åŠ¡
const docsTask = await mcp.call("create_coding_task", {
  task_type: "documentation",
  subtype: "api_docs",
  repository_path: "/path/to/api/project",
  branch_name: "docs/api-v2",
  requirements: "ä¸ºæ–°çš„ API v2 ç”Ÿæˆå®Œæ•´çš„ OpenAPI æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹",
  priority: "medium"
});

// 4. ç›‘æ§ä»»åŠ¡çŠ¶æ€
const status = await mcp.call("get_task_status", {
  task_id: refactorTask.task_id
});
```

## ä»»åŠ¡æ‰§è¡Œæµç¨‹

### 1. **ä»»åŠ¡æ¥æ”¶å’ŒéªŒè¯**
```
ä¸» AI è¯·æ±‚ â†’ MCP æœåŠ¡å™¨ â†’ ä»»åŠ¡åˆ†ç±»å™¨ â†’ éªŒè¯ä»»åŠ¡ç±»å‹ â†’ åˆ›å»ºä»»åŠ¡å®ä¾‹
```

### 2. **ç¯å¢ƒå‡†å¤‡**
```
Git Worktree åˆ›å»º â†’ åˆ†æ”¯åˆ‡æ¢ â†’ ä¾èµ–å®‰è£… â†’ ç¯å¢ƒé…ç½®
```

### 3. **å®ä¾‹åˆ†é…å’Œæ‰§è¡Œ**
```
é€‰æ‹©ä¸“ä¸šå®ä¾‹ â†’ è·¯å¾„è½¬æ¢ â†’ WSL ç¯å¢ƒå¯åŠ¨ â†’ Claude Code æ‰§è¡Œ
```

### 4. **ç»“æœå¤„ç†**
```
æ‰§è¡Œç›‘æ§ â†’ ç»“æœæ”¶é›† â†’ è´¨é‡è¯„ä¼° â†’ çŠ¶æ€æ›´æ–° â†’ é€šçŸ¥ä¸» AI
```

## è´¨é‡ä¿è¯æœºåˆ¶

### 1. **ä»»åŠ¡é€‚é…æ€§æ£€æŸ¥**
- éªŒè¯ä»»åŠ¡æ˜¯å¦é€‚åˆ Claude Code å¤„ç†
- æ‹’ç»åº”è¯¥ç”±ä¸» AI å¤„ç†çš„åˆ›æ„æ€§æˆ–è®¾è®¡æ€§ä»»åŠ¡
- ç¡®ä¿ä»»åŠ¡æœ‰æ˜ç¡®çš„æŠ€æœ¯è¦æ±‚å’ŒéªŒæ”¶æ ‡å‡†

### 2. **æ‰§è¡Œè´¨é‡ç›‘æ§**
- ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆè¯­æ³•ã€é£æ ¼ã€æµ‹è¯•è¦†ç›–ç‡ï¼‰
- å®‰å…¨æ€§æ‰«æï¼ˆæ¼æ´æ£€æµ‹ã€ä¾èµ–å®‰å…¨ï¼‰
- æ€§èƒ½å½±å“è¯„ä¼°ï¼ˆæ„å»ºæ—¶é—´ã€è¿è¡Œæ—¶æ€§èƒ½ï¼‰

### 3. **ç»“æœéªŒè¯**
- è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ
- ä»£ç å®¡æŸ¥æŠ¥å‘Šç”Ÿæˆ
- æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥

## é…ç½®ç¤ºä¾‹

### MCP æœåŠ¡å™¨é…ç½®
```yaml
# mcp_server_config.yaml
server:
  name: "auto-claude-code-mcp"
  version: "1.0.0"
  description: "Claude Code ä»»åŠ¡åˆ†å‘ç³»ç»Ÿ"

task_types:
  codebase_maintenance:
    enabled: true
    max_concurrent: 3
    timeout: "2h"
    
  automated_development:
    enabled: true
    max_concurrent: 5
    timeout: "1h"
    
  code_analysis:
    enabled: true
    max_concurrent: 2
    timeout: "30m"

instances:
  legacy_expert:
    specialization: ["legacy_refactor", "code_cleanup"]
    max_context: "200k"
    
  test_expert:
    specialization: ["test_generation", "ci_cd_setup"]
    max_context: "150k"
    
  docs_expert:
    specialization: ["api_docs", "architecture_docs"]
    max_context: "100k"
```

## ç›‘æ§å’Œæ—¥å¿—

### å®æ—¶ç›‘æ§æŒ‡æ ‡
- æ´»è·ƒä»»åŠ¡æ•°é‡
- å¹³å‡æ‰§è¡Œæ—¶é—´
- æˆåŠŸç‡ç»Ÿè®¡
- èµ„æºä½¿ç”¨æƒ…å†µ

### è¯¦ç»†æ—¥å¿—è®°å½•
- ä»»åŠ¡åˆ›å»ºå’Œåˆ†é…æ—¥å¿—
- Claude Code æ‰§è¡Œæ—¥å¿—
- é”™è¯¯å’Œå¼‚å¸¸æ—¥å¿—
- æ€§èƒ½æŒ‡æ ‡æ—¥å¿—

è¿™ä¸ªè®¾è®¡ç¡®ä¿äº† Claude Code ä¸“æ³¨äºå…¶ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œé¿å…ä¸ä¸» AI åŠŸèƒ½é‡å ï¼ŒåŒæ—¶æä¾›äº†å®Œæ•´çš„ä»»åŠ¡ç®¡ç†å’Œç›‘æ§èƒ½åŠ›ã€‚ 